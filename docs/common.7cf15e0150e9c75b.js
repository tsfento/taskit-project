"use strict";(self.webpackChunktaskit_project=self.webpackChunktaskit_project||[]).push([[592],{9306:(_,m,l)=>{l.d(m,{H:()=>D});var s=l(95);class g{static invalidDueDate(d){let a=new Intl.Collator;const e=new Date,o=e.getFullYear().toString();let r=String(e.getMonth()+1),i=e.getDate().toString();return Number(r)<10&&(r="0"+r),Number(i)<10&&(i="0"+i),-1===a.compare(d.value,`${o}-${r}-${i}`)?{invalidDueDate:!0}:null}}var u=l(319),t=l(4946);let p=(()=>{class n{transform(a){const e=a.split("-");if(Number(e[2])<10){const i=e[2].split("");e[2]=i[1]}return`${["Jan","Feb","Mar","Apr","Jun","May","Jul","Aug","Sep","Oct","Nov","Dec"][Number(e[1])-1]} ${function r(i){if(Number(i)>=11&&Number(i)<=13)return i+"th";switch(Number(i)%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd";default:return i+"th"}}(e[2])}, ${e[0]}`}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275pipe=t.Yjl({name:"formatDate",type:n,pure:!0})}return n})();var h=l(1294),c=l(51),k=l(6814);function f(n,d){1&n&&(t.TgZ(0,"span",32),t._uU(1,"Please enter a title."),t.qZA())}function b(n,d){1&n&&(t.TgZ(0,"span",33),t._uU(1,"Please enter some details."),t.qZA())}function v(n,d){1&n&&(t.TgZ(0,"p",34),t._uU(1,"Due date cannot be before today."),t.qZA())}let D=(()=>{class n{constructor(a,e,o){this.tasksService=a,this.router=e,this.route=o,this.tasks=[],this.formatDatePipe=new p}ngOnInit(){this.tasks=this.tasksService.getTasks(),this.tasksSub=this.tasksService.tasksChanged.subscribe(a=>{this.tasks=a.tasks}),this.taskForm=new s.cw({title:new s.NI(null,s.kI.required),details:new s.NI(null,s.kI.required),dueDate:new s.NI(this.getTodaysDate(),[s.kI.required,g.invalidDueDate]),priority:new s.NI("Low-1",s.kI.required),status:new s.NI("To Do-1",s.kI.required)})}ngOnDestroy(){this.tasksSub.unsubscribe()}onSubmitForm(){if(this.isEditing){const a=this.taskForm.get("priority").value.split("-"),e=this.taskForm.get("status").value.split("-"),o=new u.i(this.tasks[this.taskIndex].id,this.taskForm.get("title").value,this.taskForm.get("details").value,this.taskForm.get("dueDate").value,a[0],e[0],this.taskForm.get("dueDate").value,+a[1],+e[1]);o.dueDate=this.formatDatePipe.transform(o.dueDate),this.tasksService.editTask(o,this.taskIndex)}else{const a=this.taskForm.get("priority").value.split("-"),e=this.taskForm.get("status").value.split("-"),o=new u.i(Date.now(),this.taskForm.get("title").value,this.taskForm.get("details").value,this.taskForm.get("dueDate").value,a[0],e[0],this.taskForm.get("dueDate").value,+a[1],+e[1]);o.dueDate=this.formatDatePipe.transform(o.dueDate),this.tasksService.addTask(o),this.router.navigate(["../","tasks-list"],{relativeTo:this.route})}this.resetForm()}showModal(a){void 0===a?this.isEditing=!1:void 0!==a&&(this.isEditing=!0,this.taskIndex=a,this.fillForm(a)),new window.bootstrap.Modal(document.getElementById("taskModal")).show()}fillForm(a){const e=this.tasks[a];this.taskForm.setValue({title:e.title,details:e.details,dueDate:e.unformattedDate,priority:e.priority+"-"+e.priorityNumber,status:e.status+"-"+e.statusNumber})}addBoredTask(a){this.taskForm.patchValue({details:a}),this.showModal()}resetForm(){this.taskForm.reset(),this.taskForm.patchValue({dueDate:this.getTodaysDate(),priority:"Low-1",status:"To Do-1"})}getTodaysDate(){const a=new Date,e=a.getFullYear().toString();let o=String(a.getMonth()+1),r=a.getDate().toString();return Number(o)<10&&(o="0"+o),Number(r)<10&&(r="0"+r),`${e}-${o}-${r}`}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(h.C),t.Y36(c.F0),t.Y36(c.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-task-modal"]],decls:50,vars:6,consts:[["id","taskModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"d-flex","justify-content-end","btn-close-div"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","g-3",3,"formGroup"],["id","taskModalLabel",1,"modal-title","fs-5"],[1,"col-8"],["for","inputTaskName",1,"form-label"],["class","help-block text-danger","style","float: right;",4,"ngIf"],["type","text","maxlength","25","placeholder","Name the task","formControlName","title",1,"form-control"],["for","inputDetails",1,"form-label","mt-3"],["class","help-block text-danger mt-3","style","float: right;",4,"ngIf"],["type","text","maxlength","250","placeholder","Describe the task","formControlName","details",1,"form-control",2,"height","160px","resize","none"],[1,"col-4"],["for","inputDueDate",1,"form-label"],["type","date","formControlName","dueDate",1,"form-control"],["class","help-block text-danger mt-3",4,"ngIf"],["for","inputPriority",1,"form-label","mt-2"],["aria-label","Priority","formControlName","priority",1,"form-select"],["selected","","value","Low-1"],["value","Medium-2"],["value","High-3"],["for","inputStatus",1,"form-label","mt-2"],["aria-label","Status","formControlName","status",1,"form-select"],["selected","","value","To Do-1"],["value","In Progress-2"],["value","Done-3"],[1,"d-flex","justify-content-between","mt-3","pb-4"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success",3,"disabled","click"],[1,"help-block","text-danger",2,"float","right"],[1,"help-block","text-danger","mt-3",2,"float","right"],[1,"help-block","text-danger","mt-3"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return o.resetForm()}),t.qZA()(),t.TgZ(5,"div",5)(6,"form",6)(7,"h1",7),t._uU(8,"Add a New Task"),t.qZA(),t.TgZ(9,"div",8)(10,"label",9),t._uU(11,"Task"),t.qZA(),t.YNc(12,f,2,0,"span",10),t._UZ(13,"input",11),t.TgZ(14,"label",12),t._uU(15,"Details"),t.qZA(),t.YNc(16,b,2,0,"span",13),t._UZ(17,"textarea",14),t.qZA(),t.TgZ(18,"div",15)(19,"label",16),t._uU(20,"Due Date"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"input",17),t.YNc(23,v,2,0,"p",18),t.qZA(),t.TgZ(24,"label",19),t._uU(25,"Priority"),t.qZA(),t.TgZ(26,"div")(27,"select",20)(28,"option",21),t._uU(29,"Low"),t.qZA(),t.TgZ(30,"option",22),t._uU(31,"Medium"),t.qZA(),t.TgZ(32,"option",23),t._uU(33,"High"),t.qZA()()(),t.TgZ(34,"label",24),t._uU(35,"Status"),t.qZA(),t.TgZ(36,"div")(37,"select",25)(38,"option",26),t._uU(39,"To Do"),t.qZA(),t.TgZ(40,"option",27),t._uU(41,"In Progress"),t.qZA(),t.TgZ(42,"option",28),t._uU(43,"Done"),t.qZA()()(),t.TgZ(44,"div",29)(45,"button",30),t.NdJ("click",function(){return o.resetForm()}),t._uU(46,"Cancel"),t.qZA(),t.TgZ(47,"div")(48,"button",31),t.NdJ("click",function(){return o.onSubmitForm()}),t._uU(49),t.qZA()()()()()()()()()),2&e&&(t.xp6(6),t.Q6J("formGroup",o.taskForm),t.xp6(6),t.Q6J("ngIf",!o.taskForm.get("title").valid&&o.taskForm.get("title").touched),t.xp6(4),t.Q6J("ngIf",!o.taskForm.get("details").valid&&o.taskForm.get("details").touched),t.xp6(7),t.Q6J("ngIf",!o.taskForm.get("dueDate").valid&&o.taskForm.get("dueDate").touched),t.xp6(25),t.Q6J("disabled",!o.taskForm.valid),t.xp6(1),t.Oqu(o.isEditing?"Update":"Create"))},dependencies:[k.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.nD,s.sg,s.u],styles:[".dropdown[_ngcontent-%COMP%]{color:#d3d3d3}.dropdown-menu[_ngcontent-%COMP%]{min-width:225px}.dropdown-toggle[_ngcontent-%COMP%]{border-color:#dee2e6}.dropdown-toggle[_ngcontent-%COMP%]:after{margin-left:190px}.low[_ngcontent-%COMP%]{color:#32cd32}.med[_ngcontent-%COMP%]{color:gold}.high[_ngcontent-%COMP%]{color:#dc143c}.text[_ngcontent-%COMP%]{color:#000}.op[_ngcontent-%COMP%]{font-family:Bootstrap-icons}.modal-title[_ngcontent-%COMP%]{font-weight:700}.btn-close-div[_ngcontent-%COMP%]{margin-top:12px;margin-right:12px}.btn-close[_ngcontent-%COMP%]{width:5px;height:5px}.btn[_ngcontent-%COMP%]{width:110px;height:35px;font-size:13px}.btn-success[_ngcontent-%COMP%]{background-color:#32cd32;border:none;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background-color:transparent;box-shadow:inset 0 0 0 1px #32cd32;color:#32cd32;transition:background-color .3s,box-shadow .3s,color .3s}input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]})}return n})()}}]);