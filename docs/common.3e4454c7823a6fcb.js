"use strict";(self.webpackChunktaskit_project=self.webpackChunktaskit_project||[]).push([[592],{9603:(_,g,r)=>{r.d(g,{i:()=>p});var a=r(4946);let p=(()=>{class u{transform(t){const l=t.split("-");if(Number(l[2])<10){const n=l[2].split("");l[2]=n[1]}return`${["Jan","Feb","Mar","Apr","Jun","May","Jul","Aug","Sep","Oct","Nov","Dec"][Number(l[1])-1]} ${function h(n){if(Number(n)>=11&&Number(n)<=13)return n+"th";switch(Number(n)%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd";default:return n+"th"}}(l[2])}, ${l[0]}`}static#t=this.\u0275fac=function(l){return new(l||u)};static#e=this.\u0275pipe=a.Yjl({name:"formatDate",type:u,pure:!0})}return u})()},319:(_,g,r)=>{r.d(g,{i:()=>a});class a{constructor(u,k,t,l,c,h,n,b,v,T){this.id=u,this.title=k,this.details=t,this.dueDate=l,this.priority=c,this.status=h,this.unformattedDate=n,this.priorityNumber=b,this.statusNumber=v,this.index=T}}},3176:(_,g,r)=>{r.d(g,{H:()=>F});var a=r(95);class p{static invalidDueDate(m){let e=new Intl.Collator;const o=new Date,s=o.getFullYear().toString();let d=String(o.getMonth()+1),f=o.getDate().toString();return Number(d)<10&&(d="0"+d),Number(f)<10&&(f="0"+f),-1===e.compare(m.value,`${s}-${d}-${f}`)?{invalidDueDate:!0}:null}}var u=r(319),k=r(9603),t=r(4946),l=r(6139),c=r(51),h=r(6814);function n(i,m){if(1&i&&(t.TgZ(0,"h1",32),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(e.isViewing?"View Task":"Edit Task")}}function b(i,m){if(1&i&&(t.TgZ(0,"h1",32),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(e.isViewing?"View Task":"Add Task")}}function v(i,m){1&i&&(t.TgZ(0,"span",33),t._uU(1,"Please enter a title."),t.qZA())}function T(i,m){1&i&&(t.TgZ(0,"span",34),t._uU(1,"Please enter some details."),t.qZA())}function D(i,m){1&i&&(t.TgZ(0,"p",35),t._uU(1,"Due date cannot be before today."),t.qZA())}let F=(()=>{class i{constructor(e,o,s){this.storageService=e,this.router=o,this.route=s,this.tasks=[],this.formatDatePipe=new k.i}ngOnInit(){this.tasks=this.storageService.fetchTasks(),this.tasksFetchedSub=this.storageService.tasksFetched.subscribe(e=>{this.tasks=e}),this.tasksChangedSub=this.storageService.tasksChanged.subscribe(e=>{this.tasks=e.tasks}),this.taskForm=new a.cw({title:new a.NI(null,a.kI.required),details:new a.NI(null,a.kI.required),dueDate:new a.NI(this.getTodaysDate(),[a.kI.required,p.invalidDueDate]),priority:new a.NI("Low-1",a.kI.required),status:new a.NI("To Do-1",a.kI.required)})}ngOnDestroy(){this.tasksFetchedSub.unsubscribe(),this.tasksChangedSub.unsubscribe()}onSubmitForm(){if(this.isEditing){const e=this.taskForm.get("priority").value.split("-"),o=this.taskForm.get("status").value.split("-"),s=new u.i(this.tasks[this.taskIndex].id,this.taskForm.get("title").value,this.taskForm.get("details").value,this.taskForm.get("dueDate").value,e[0],o[0],this.taskForm.get("dueDate").value,+e[1],+o[1]);s.dueDate=this.formatDatePipe.transform(s.dueDate),this.storageService.editTask(s,this.taskIndex)}else{const e=this.taskForm.get("priority").value.split("-"),o=this.taskForm.get("status").value.split("-"),s=new u.i(Date.now(),this.taskForm.get("title").value,this.taskForm.get("details").value,this.taskForm.get("dueDate").value,e[0],o[0],this.taskForm.get("dueDate").value,+e[1],+o[1]);s.dueDate=this.formatDatePipe.transform(s.dueDate),this.storageService.addTask(s),this.router.navigate(["../","tasks-list"],{relativeTo:this.route})}this.resetForm()}showModal(e,o){void 0===e?(this.taskForm.enable(),this.isEditing=!1,this.isViewing=!1):void 0!==e&&o?(this.taskForm.disable(),this.isViewing=!0,this.fillForm(e)):void 0!==e&&(this.taskForm.enable(),this.isEditing=!0,this.isViewing=!1,this.taskIndex=e,this.fillForm(e)),new window.bootstrap.Modal(document.getElementById("taskModal")).show()}fillForm(e){const o=this.tasks[e];this.taskForm.setValue({title:o.title,details:o.details,dueDate:o.unformattedDate,priority:o.priority+"-"+o.priorityNumber,status:o.status+"-"+o.statusNumber})}addBoredTask(e){this.taskForm.patchValue({details:e}),this.showModal()}resetForm(){this.taskForm.reset(),this.taskForm.patchValue({dueDate:this.getTodaysDate(),priority:"Low-1",status:"To Do-1"})}getTodaysDate(){const e=new Date,o=e.getFullYear().toString();let s=String(e.getMonth()+1),d=e.getDate().toString();return Number(s)<10&&(s="0"+s),Number(d)<10&&(d="0"+d),`${o}-${s}-${d}`}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(l.V),t.Y36(c.F0),t.Y36(c.gz))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-task-modal"]],decls:50,vars:8,consts:[["id","taskModal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"d-flex","justify-content-end","btn-close-div"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","g-3",3,"formGroup"],["class","modal-title fs-5","id","taskModalLabel",4,"ngIf"],[1,"col-8"],["for","inputTaskName",1,"form-label"],["class","help-block text-danger","style","float: right;",4,"ngIf"],["type","text","maxlength","25","placeholder","Name the task","formControlName","title",1,"form-control"],["for","inputDetails",1,"form-label","mt-3"],["class","help-block text-danger mt-3","style","float: right;",4,"ngIf"],["type","text","maxlength","250","placeholder","Describe the task","formControlName","details",1,"form-control",2,"height","160px","resize","none"],[1,"col-4"],["for","inputDueDate",1,"form-label"],["type","date","formControlName","dueDate",1,"form-control"],["class","help-block text-danger mt-3",4,"ngIf"],["for","inputPriority",1,"form-label","mt-2"],["aria-label","Priority","formControlName","priority",1,"form-select"],["selected","","value","Low-1"],["value","Medium-2"],["value","High-3"],["for","inputStatus",1,"form-label","mt-2"],["aria-label","Status","formControlName","status",1,"form-select"],["selected","","value","To Do-1"],["value","In Progress-2"],["value","Done-3"],[1,"d-flex","justify-content-between","mt-3","pb-4"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success",3,"disabled","click"],["id","taskModalLabel",1,"modal-title","fs-5"],[1,"help-block","text-danger",2,"float","right"],[1,"help-block","text-danger","mt-3",2,"float","right"],[1,"help-block","text-danger","mt-3"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return s.resetForm()}),t.qZA()(),t.TgZ(5,"div",5)(6,"form",6),t.YNc(7,n,2,1,"h1",7),t.YNc(8,b,2,1,"h1",7),t.TgZ(9,"div",8)(10,"label",9),t._uU(11,"Task"),t.qZA(),t.YNc(12,v,2,0,"span",10),t._UZ(13,"input",11),t.TgZ(14,"label",12),t._uU(15,"Details"),t.qZA(),t.YNc(16,T,2,0,"span",13),t._UZ(17,"textarea",14),t.qZA(),t.TgZ(18,"div",15)(19,"label",16),t._uU(20,"Due Date"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"input",17),t.YNc(23,D,2,0,"p",18),t.qZA(),t.TgZ(24,"label",19),t._uU(25,"Priority"),t.qZA(),t.TgZ(26,"div")(27,"select",20)(28,"option",21),t._uU(29,"Low"),t.qZA(),t.TgZ(30,"option",22),t._uU(31,"Medium"),t.qZA(),t.TgZ(32,"option",23),t._uU(33,"High"),t.qZA()()(),t.TgZ(34,"label",24),t._uU(35,"Status"),t.qZA(),t.TgZ(36,"div")(37,"select",25)(38,"option",26),t._uU(39,"To Do"),t.qZA(),t.TgZ(40,"option",27),t._uU(41,"In Progress"),t.qZA(),t.TgZ(42,"option",28),t._uU(43,"Done"),t.qZA()()(),t.TgZ(44,"div",29)(45,"button",30),t.NdJ("click",function(){return s.resetForm()}),t._uU(46,"Cancel"),t.qZA(),t.TgZ(47,"div")(48,"button",31),t.NdJ("click",function(){return s.onSubmitForm()}),t._uU(49),t.qZA()()()()()()()()()),2&o&&(t.xp6(6),t.Q6J("formGroup",s.taskForm),t.xp6(1),t.Q6J("ngIf",s.isEditing),t.xp6(1),t.Q6J("ngIf",!s.isEditing),t.xp6(4),t.Q6J("ngIf",!s.taskForm.get("title").valid&&s.taskForm.get("title").touched),t.xp6(4),t.Q6J("ngIf",!s.taskForm.get("details").valid&&s.taskForm.get("details").touched),t.xp6(7),t.Q6J("ngIf",!s.taskForm.get("dueDate").valid&&s.taskForm.get("dueDate").touched),t.xp6(25),t.Q6J("disabled",!s.taskForm.valid),t.xp6(1),t.Oqu(s.isEditing?"Update":"Create"))},dependencies:[h.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.nD,a.sg,a.u],styles:[".dropdown[_ngcontent-%COMP%]{color:#d3d3d3}.dropdown-menu[_ngcontent-%COMP%]{min-width:225px}.dropdown-toggle[_ngcontent-%COMP%]{border-color:#dee2e6}.dropdown-toggle[_ngcontent-%COMP%]:after{margin-left:190px}.low[_ngcontent-%COMP%]{color:#32cd32}.med[_ngcontent-%COMP%]{color:gold}.high[_ngcontent-%COMP%]{color:#dc143c}.text[_ngcontent-%COMP%]{color:#000}.op[_ngcontent-%COMP%]{font-family:Bootstrap-icons}.modal-title[_ngcontent-%COMP%]{font-weight:700}.btn-close-div[_ngcontent-%COMP%]{margin-top:12px;margin-right:12px}.btn-close[_ngcontent-%COMP%]{width:5px;height:5px}.btn[_ngcontent-%COMP%]{width:110px;height:35px;font-size:13px}.btn-success[_ngcontent-%COMP%]{background-color:#32cd32;border:none;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background-color:transparent;box-shadow:inset 0 0 0 1px #32cd32;color:#32cd32;transition:background-color .3s,box-shadow .3s,color .3s}input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]})}return i})()}}]);